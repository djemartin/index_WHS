<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>WHS Golf</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
<header>
    <nav>
        <a href="/add_tour">Ajouter un Tour</a>
        <a href="/start_score">Nouvelle Carte</a>
        <a href="/golf">Gérer les Golfs</a>
        <a href="/scores">Cartes</a>
        <a href="/stats">Statistiques</a>
    </nav>
</header>
<main>
    <h1>Liste des Tours</h1>
    <table>
        <thead>
            <tr>
                <th>Nom</th>
                <th>Jour</th>
                <th>Golf</th>
                <th>Total Score</th>
                <th>Total SBA</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for tour in tours %}
            <tr>
                <td>{{ tour.name }}</td>
                <td>{{ tour.get('jour') }}</td>
                <td>
                    {% set g = golfs.get(tour.golf_id) %}
                    {{ g.name if g }}
                </td>
                <td>{{ tour.total_score if tour.total_score is not none else '' }}</td>
                <td>{{ tour.total_sba if tour.total_sba is not none else '' }}</td>
                <td>
                    <a href="{{ url_for('add_score', tour_id=tour.doc_id) }}">Modifier</a>
                    <form action="{{ url_for('delete_tour', tour_id=tour.doc_id) }}" method="post" style="display:inline;">
                        <button type="submit" onclick="return confirm('Supprimer ce tour ?');">Supprimer</button>
                    </form>
                    <a href="{{ url_for('add_score', tour_id=tour.doc_id) }}">Saisir Score</a>
                </td>
            </tr>
            {% else %}
            <tr><td colspan="6">Aucun tour enregistré.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</main>
</body>
</html>
